<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138613977-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138613977-1');
</script>


  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>LFortran compiles Prima - </title>

  <meta name="description" content="We&rsquo;re thrilled to share that LFortran can now successfully compile and execute libprima/PRIMA. PRIMA marks the eighth production-grade, third-party code that LFortran has compiled with bit-for-bit alignment to GFortran&rsquo;s output. This milestone brings us closer to our goal of compiling 10 such codes—an essential step toward achieving a beta-quality compiler.

About PRIMA
PRIMA is a package for solving general nonlinear optimization problems without using derivatives. It provides the reference implementation for Powell&rsquo;s derivative-free optimization methods, i.e., COBYLA, UOBYQA, NEWUOA, BOBYQA, and LINCOA. PRIMA means Reference Implementation for Powell&rsquo;s methods with Modernization and Amelioration, P for Powell. The package is written in Fortran and is widely used in the scientific community for solving optimization problems.
It utilizes a range of Modern Fortran features, including extensive use of optional variables, function pointer passing, and a randomized test driver, among others. Successfully compiling PRIMA requires a compiler with a robust and mature backend, as well as well-developed intermediate passes and a capable parser."><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "LFortran",
    
    "url": "https:\/\/lfortran.org\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/lfortran.org\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/lfortran.org\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/lfortran.org\/blog\/2025\/03\/lfortran-compiles-prima\/",
          "name": "Lfortran compiles prima"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "[Jinang Shah](https:\/\/github.com\/jinangshah21), [Ansh Mehta](https:\/\/github.com\/AnshMehta1), [Assem Medhat](https:\/\/github.com\/assem2002), [Pranav Goswami](https:\/\/www.linkedin.com\/in\/pranavgoswami1\/), [Harshita Kalani](https:\/\/github.com\/HarshitaKalani), [Parth Mistry](https:\/\/www.linkedin.com\/in\/parth-mistry-86b884229\/), [Gaurav Dhingra](https:\/\/github.com\/gxyd), [Saurabh Kumar](https:\/\/github.com\/kmr-srbh), [Aditya Trivedi](https:\/\/github.com\/adit4443ya), [Gagandeep Singh](https:\/\/github.com\/czgdp1807), [Ubaid Shaikh](https:\/\/github.com\/Shaikh-Ubaid), [Thirumalai Shaktivel](https:\/\/www.linkedin.com\/in\/thirumalai-shaktivel\/), [Vipul Cariappa](https:\/\/github.com\/Vipul-Cariappa), [Shivi Mathur](https:\/\/github.com\/shivimathur), [Kerim Birgi](https:\/\/github.com\/KGB99), [Serge Sans Paille](https:\/\/github.com\/serge-sans-paille), [Advik Kabra](https:\/\/github.com\/advikkabra), [Brian Beckman](https:\/\/www.linkedin.com\/in\/brianbeckman), [Dylon Edwards](https:\/\/www.linkedin.com\/in\/dylon-edwards-0936bb39\/), [Naman Gera](https:\/\/uk.linkedin.com\/in\/namannimmo), [Rohit Goswami](https:\/\/gitlab.com\/HaoZeke), [Dominic Poerio](https:\/\/github.com\/dpoerio), [Akshānsh Bhatt](https:\/\/github.com\/akshanshbhatt), [Virendra Kabra](https:\/\/www.linkedin.com\/in\/virendrakabra\/), [Anutosh Bhat](https:\/\/github.com\/anutosh491), [Luthfan Lubis](https:\/\/github.com\/ansharlubis), [Zihua Wu](https:\/\/github.com\/lucifer1004), [Khushi Agrawal](https:\/\/khushi-411.github.io\/), [Christoph Junghans](https:\/\/github.com\/junghans), [Tanay Manerikar](https:\/\/github.com\/tanay-man), [Wolf Vollprecht](https:\/\/github.com\/wolfv), [Smit Lunagariya](https:\/\/www.linkedin.com\/in\/smit-lunagariya-356b93179\/), [Paul Henning](https:\/\/github.com\/pjh40), [Ondřej Čertík](https:\/\/ondrejcertik.com\/), [Jaysukh Makvana](https:\/\/github.com\/Jaysukh-409), [Harshil Shah](https:\/\/github.com\/HarshilShah1804), [Gauravsingh Sisodia](https:\/\/github.com\/xaerru), [Karna Pardheev Sai](https:\/\/github.com\/saikarna913) "
  },
  "headline": "LFortran compiles Prima",
  "description" : "We\u0026rsquo;re thrilled to share that LFortran can now successfully compile and execute libprima\/PRIMA. PRIMA marks the eighth production-grade, third-party code that LFortran has compiled with bit-for-bit alignment to GFortran\u0026rsquo;s output. This milestone brings us closer to our goal of compiling 10 such codes—an essential step toward achieving a beta-quality compiler.\nAbout PRIMA PRIMA is a package for solving general nonlinear optimization problems without using derivatives. It provides the reference implementation for Powell\u0026rsquo;s derivative-free optimization methods, i.e., COBYLA, UOBYQA, NEWUOA, BOBYQA, and LINCOA. PRIMA means Reference Implementation for Powell\u0026rsquo;s methods with Modernization and Amelioration, P for Powell. The package is written in Fortran and is widely used in the scientific community for solving optimization problems. It utilizes a range of Modern Fortran features, including extensive use of optional variables, function pointer passing, and a randomized test driver, among others. Successfully compiling PRIMA requires a compiler with a robust and mature backend, as well as well-developed intermediate passes and a capable parser.\n",
  "inLanguage" : "en",
  "wordCount":  1018 ,
  "datePublished" : "2025-03-04T00:00:00\u002b00:00",
  "dateModified" : "2025-03-04T00:00:00\u002b00:00",
  "image" : "https:\/\/lfortran.org\/",
  "keywords" : [ "Fortran, Announcement, Fortran-lang, PRIMA" ],
  "mainEntityOfPage" : "https:\/\/lfortran.org\/blog\/2025\/03\/lfortran-compiles-prima\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/lfortran.org\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/lfortran.org\/",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>


<meta property="og:title" content="LFortran compiles Prima" />
<meta property="og:description" content="We&rsquo;re thrilled to share that LFortran can now successfully compile and execute libprima/PRIMA. PRIMA marks the eighth production-grade, third-party code that LFortran has compiled with bit-for-bit alignment to GFortran&rsquo;s output. This milestone brings us closer to our goal of compiling 10 such codes—an essential step toward achieving a beta-quality compiler.

About PRIMA
PRIMA is a package for solving general nonlinear optimization problems without using derivatives. It provides the reference implementation for Powell&rsquo;s derivative-free optimization methods, i.e., COBYLA, UOBYQA, NEWUOA, BOBYQA, and LINCOA. PRIMA means Reference Implementation for Powell&rsquo;s methods with Modernization and Amelioration, P for Powell. The package is written in Fortran and is widely used in the scientific community for solving optimization problems.
It utilizes a range of Modern Fortran features, including extensive use of optional variables, function pointer passing, and a randomized test driver, among others. Successfully compiling PRIMA requires a compiler with a robust and mature backend, as well as well-developed intermediate passes and a capable parser.">
<meta property="og:url" content="https://lfortran.org/blog/2025/03/lfortran-compiles-prima/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="LFortran" />

  <meta name="twitter:title" content="LFortran compiles Prima" />
  <meta name="twitter:description" content="We&rsquo;re thrilled to share that LFortran can now successfully compile and execute libprima/PRIMA. PRIMA marks the eighth production-grade, third-party code that LFortran has compiled with …">
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="generator" content="Hugo 0.138.0">
  <link rel="alternate" href="https://lfortran.org/index.xml" type="application/rss+xml" title="LFortran"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://lfortran.org/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://lfortran.org/css/syntax.css" /><link rel="stylesheet" href="https://lfortran.org/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">





<style>
h2 {
    font-size: 20px;
}
p, li {
    text-align: justify;
}
img {
    display: inline;
}
h1.h1heading {
    text-align: center;
}
h2.h2heading {
    text-align: center;
    font-size: 20px;
    font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-weight: 300;
    margin: 0 0 0;
}
#benefit i {
    margin-right: 20px;
}
#benefit {
    padding-left: 30px;
    padding-right: 30px;
}
#benefits {
    margin-top: 30px;
    margin-bottom: 50px;
}
.post-heading .post-meta a {
  color: #008AFF;
}
.post-heading .post-meta a:hover, a:focus {
  color: #0085a1;
  text-decoration: underline;
}

[data-toggle="collapse"].collapsed .if-not-collapsed {
  display: none;
}
[data-toggle="collapse"]:not(.collapsed) .if-collapsed {
  display: none;
}
</style>

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://lfortran.org/">LFortran</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Download" href="/download/">Download</a>
            </li>
          
        
          
            <li>
              <a title="Documentation" href="https://docs.lfortran.org/">Documentation</a>
            </li>
          
        
          
            <li>
              <a title="Blog" href="/blog/">Blog</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>LFortran compiles Prima</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on March 4, 2025
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1018&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;<a href="https://github.com/jinangshah21">Jinang Shah</a>, <a href="https://github.com/AnshMehta1">Ansh Mehta</a>, <a href="https://github.com/assem2002">Assem Medhat</a>, <a href="https://www.linkedin.com/in/pranavgoswami1/">Pranav Goswami</a>, <a href="https://github.com/HarshitaKalani">Harshita Kalani</a>, <a href="https://www.linkedin.com/in/parth-mistry-86b884229/">Parth Mistry</a>, <a href="https://github.com/gxyd">Gaurav Dhingra</a>, <a href="https://github.com/kmr-srbh">Saurabh Kumar</a>, <a href="https://github.com/adit4443ya">Aditya Trivedi</a>, <a href="https://github.com/czgdp1807">Gagandeep Singh</a>, <a href="https://github.com/Shaikh-Ubaid">Ubaid Shaikh</a>, <a href="https://www.linkedin.com/in/thirumalai-shaktivel/">Thirumalai Shaktivel</a>, <a href="https://github.com/Vipul-Cariappa">Vipul Cariappa</a>, <a href="https://github.com/shivimathur">Shivi Mathur</a>, <a href="https://github.com/KGB99">Kerim Birgi</a>, <a href="https://github.com/serge-sans-paille">Serge Sans Paille</a>, <a href="https://github.com/advikkabra">Advik Kabra</a>, <a href="https://www.linkedin.com/in/brianbeckman">Brian Beckman</a>, <a href="https://www.linkedin.com/in/dylon-edwards-0936bb39/">Dylon Edwards</a>, <a href="https://uk.linkedin.com/in/namannimmo">Naman Gera</a>, <a href="https://gitlab.com/HaoZeke">Rohit Goswami</a>, <a href="https://github.com/dpoerio">Dominic Poerio</a>, <a href="https://github.com/akshanshbhatt">Akshānsh Bhatt</a>, <a href="https://www.linkedin.com/in/virendrakabra/">Virendra Kabra</a>, <a href="https://github.com/anutosh491">Anutosh Bhat</a>, <a href="https://github.com/ansharlubis">Luthfan Lubis</a>, <a href="https://github.com/lucifer1004">Zihua Wu</a>, <a href="https://khushi-411.github.io/">Khushi Agrawal</a>, <a href="https://github.com/junghans">Christoph Junghans</a>, <a href="https://github.com/tanay-man">Tanay Manerikar</a>, <a href="https://github.com/wolfv">Wolf Vollprecht</a>, <a href="https://www.linkedin.com/in/smit-lunagariya-356b93179/">Smit Lunagariya</a>, <a href="https://github.com/pjh40">Paul Henning</a>, <a href="https://ondrejcertik.com/">Ondřej Čertík</a>, <a href="https://github.com/Jaysukh-409">Jaysukh Makvana</a>, <a href="https://github.com/HarshilShah1804">Harshil Shah</a>, <a href="https://github.com/xaerru">Gauravsingh Sisodia</a>, <a href="https://github.com/saikarna913">Karna Pardheev Sai</a>
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>We&rsquo;re thrilled to share that <a href="https://github.com/lfortran/lfortran">LFortran</a> can now successfully compile and execute <a href="https://github.com/libprima/prima">libprima/PRIMA</a>. PRIMA marks the eighth production-grade, third-party code that LFortran has compiled with bit-for-bit alignment to GFortran&rsquo;s output. This milestone brings us closer to our goal of compiling 10 such codes—an essential step toward achieving a beta-quality compiler.</p>
<hr>
<h1 id="about-prima">About PRIMA</h1>
<p>PRIMA is a package for solving general nonlinear optimization problems without using derivatives. It provides the reference implementation for Powell&rsquo;s derivative-free optimization methods, i.e., COBYLA, UOBYQA, NEWUOA, BOBYQA, and LINCOA. PRIMA means Reference Implementation for Powell&rsquo;s methods with Modernization and Amelioration, P for Powell. The package is written in Fortran and is widely used in the scientific community for solving optimization problems.
It utilizes a range of Modern Fortran features, including extensive use of optional variables, function pointer passing, and a randomized test driver, among others. Successfully compiling PRIMA requires a compiler with a robust and mature backend, as well as well-developed intermediate passes and a capable parser.</p>
<h1 id="how-to-compile-prima-with-lfortran">How to Compile PRIMA with LFortran</h1>
<p>Follow the steps shown below to build, compile and run PRIMA examples and tests with LFortran.</p>
<h2 id="set-up-the-environment">Set up the Environment</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>conda create -n lfortran lfortran<span style="color:#f92672">=</span>0.46.0 make cmake
</span></span><span style="display:flex;"><span>conda activate lfortran
</span></span><span style="display:flex;"><span>git clone https://github.com/Pranavchiku/prima.git
</span></span><span style="display:flex;"><span>cd prima
</span></span><span style="display:flex;"><span>git checkout -t origin/lf-prima-12
</span></span></code></pre></div><blockquote>
<p>For <code>macos</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>export LFORTRAN_RUNNER_OS<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;macos&#39;</span>;
</span></span></code></pre></div><blockquote>
<p>For <code>linux</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>export LFORTRAN_RUNNER_OS<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;linux&#39;</span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>git clean -dfx
</span></span><span style="display:flex;"><span>FC=&#34;lfortran --cpp&#34; cmake -S . -B build -DCMAKE_INSTALL_PREFIX=$(pwd)/install  &amp;&amp; cmake --build build --target install
</span></span></code></pre></div><blockquote>
<p>To execute examples</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>./build/fortran/example_bobyqa_fortran_1_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_bobyqa_fortran_2_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_cobyla_fortran_1_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_cobyla_fortran_2_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_lincoa_fortran_1_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_lincoa_fortran_2_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_newuoa_fortran_1_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_newuoa_fortran_2_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_uobyqa_fortran_1_exe
</span></span><span style="display:flex;"><span>./build/fortran/example_uobyqa_fortran_2_exe
</span></span></code></pre></div><blockquote>
<p>To execute tests</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>cd fortran/
</span></span><span style="display:flex;"><span>test_name=test_xx.f90 FC=lfortran ./script.sh
</span></span><span style="display:flex;"><span>cd ../
</span></span></code></pre></div><h2 id="build-with-optimisations">Build with optimisations</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>git clean -dfx
</span></span><span style="display:flex;"><span>FC=&#34;lfortran --cpp --fast&#34; cmake -S . -B build -DCMAKE_INSTALL_PREFIX=$(pwd)/install  &amp;&amp; cmake --build build --target install
</span></span></code></pre></div><h2 id="compilation-benchmarks">Compilation Benchmarks</h2>
<p>To ensure no performance loss, we conducted several benchmarks comparing LFortran against GFortran when compiling PRIMA. For these tests, we used <code>lfortran=0.46.0</code> on a MacBook Air M2 with 8GB of RAM.</p>
<table>
  <thead>
      <tr>
          <th>Test Scenario</th>
          <th>Compiler</th>
          <th>Command</th>
          <th>Time</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Compiling <code>cobyla</code></td>
          <td>LFortran 0.46.0</td>
          <td><code>time FC=&quot;lfortran --cpp&quot; cmake -S . -B build -DCMAKE_INSTALL_PREFIX=$(pwd)/install  &amp;&amp; time cmake --build build --target install</code></td>
          <td>5.284</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>FC=gfortran cmake -S . -B build -DCMAKE_INSTALL_PREFIX=install -DCMAKE_Fortran_COMPILER=gfortran &amp;&amp; time cmake --build build --target install</code></td>
          <td>6.881</td>
      </tr>
  </tbody>
</table>
<h3 id="example-benchmarks">Example Benchmarks</h3>
<table>
  <thead>
      <tr>
          <th>Example</th>
          <th>Compiler</th>
          <th>Command</th>
          <th>Time</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>bobyqa_example_1</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_bobyqa_fortran_1_exe</code></td>
          <td>0.029s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_bobyqa_fortran_1_exe</code></td>
          <td>0.015s</td>
      </tr>
      <tr>
          <td>bobyqa_example_2</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_bobyqa_fortran_2_exe</code></td>
          <td>0.36s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_bobyqa_fortran_2_exe</code></td>
          <td>0.166s</td>
      </tr>
      <tr>
          <td>cobyla_example_1</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_cobyla_fortran_1_exe</code></td>
          <td>0.03s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_cobyla_fortran_1_exe</code></td>
          <td>0.015s</td>
      </tr>
      <tr>
          <td>cobyla_example_2</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_cobyla_fortran_2_exe</code></td>
          <td>0.19s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_cobyla_fortran_2_exe</code></td>
          <td>0.087s</td>
      </tr>
      <tr>
          <td>lincoa_example_1</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_lincoa_fortran_1_exe</code></td>
          <td>0.033s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_lincoa_fortran_1_exe</code></td>
          <td>0.016s</td>
      </tr>
      <tr>
          <td>lincoa_example_2</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_lincoa_fortran_2_exe</code></td>
          <td>3.43s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_lincoa_fortran_2_exe</code></td>
          <td>0.099s</td>
      </tr>
      <tr>
          <td>newuoa_example_1</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_newuoa_fortran_1_exe</code></td>
          <td>0.026s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_newuoa_fortran_1_exe</code></td>
          <td>0.011s</td>
      </tr>
      <tr>
          <td>newuoa_example_2</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_newuoa_fortran_2_exe</code></td>
          <td>0.05s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_newuoa_fortran_2_exe</code></td>
          <td>0.037s</td>
      </tr>
      <tr>
          <td>uobyqa_example_1</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_uobyqa_fortran_1_exe</code></td>
          <td>0.02s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_uobyqa_fortran_1_exe</code></td>
          <td>0.01s</td>
      </tr>
      <tr>
          <td>uobyqa_example_2</td>
          <td>LFortran 0.46.0</td>
          <td><code>time ./build/fortran/example_uobyqa_fortran_2_exe</code></td>
          <td>0.05s</td>
      </tr>
      <tr>
          <td></td>
          <td>GFortran 14.2.0</td>
          <td><code>time ./build/fortran/example_uobyqa_fortran_2_exe</code></td>
          <td>0.02s</td>
      </tr>
  </tbody>
</table>
<p>We&rsquo;re pleased to report that LFortran compiles the PRIMA code as is—without any workarounds or modifications—except for the necessary adjustments to integrate LFortran into the existing PRIMA build system.</p>
<h1 id="development-overview">Development Overview</h1>
<p>PRIMA has been on our list since we set out to achieve our goal of compiling 10 production-level codes. However, compiling it was no cakewalk—it came with its own set of challenges. Despite this, our team&rsquo;s collaborative effort and determination allowed us to tackle them effectively. Here are some key areas where we focused our development efforts:</p>
<h2 id="strengthening-support-for-procedure-variables">Strengthening support for <code>procedure</code> variables</h2>
<p>PRIMA extensively utilizes function pointers as arguments, relying on procedure variables for linking. This posed a challenge due to LFortran&rsquo;s initial improper handling of procedure variables in its intermediate passes. Addressing this issue required multiple pull requests, which can be found under <a href="https://github.com/lfortran/lfortran/pulls?q=is%3Amerged+is%3Apr+label%3APRIMA+">label-prima</a>.</p>
<h2 id="passing-arrays-with-unequal-strides-not-equal-to-one-to-functions">Passing arrays with unequal strides not equal to one to functions</h2>
<p>PRIMA presented cases where array sections with non-unit strides were passed to functions, requiring us to generate temporary arrays at runtime. To handle this efficiently, we developed a dedicated pass to detect such cases and create the necessary temporaries. The implementation details can be found at <a href="https://github.com/lfortran/lfortran/pull/6363">PR#6363</a></p>
<h2 id="precision-loss-while-using-power--operator">Precision loss while using power <code>**</code> operator</h2>
<p>We encountered precision loss issues in PRIMA when using the power operator <code>**</code>, particularly with double-precision variables with large exponents. This led to incorrect results for expressions like <code>v**3</code>, as LFortran internally cast the exponent to real(3, kind=8). This issue was resolved by using <code>llvm.powi</code> through a dedicated <a href="https://github.com/lfortran/lfortran/pull/6191">PR#</a>.</p>
<p>Along with these there were several other issues that were resolved to successfully compile PRIMA with LFortran. The complete list of issues and PRs can be found <a href="https://github.com/lfortran/lfortran/pulls?q=is%3Amerged+label%3APRIMA+">here</a>.</p>
<h1 id="whats-next">What&rsquo;s Next?</h1>
<p>As of this writing, LFortran compiles eight third-party codes:</p>
<ul>
<li><a href="https://github.com/scipy/scipy/tree/f797ac7721310c7bd98bae416be1bed9975b4203/scipy/optimize/minpack">Legacy Minpack</a> (part of SciPy) and several more SciPy packages</li>
<li><a href="https://github.com/fortran-lang/minpack">Modern Minpack</a></li>
<li><a href="https://github.com/certik/fastGPT">fastGPT</a></li>
<li><a href="https://github.com/certik/dftatom">dftatom</a></li>
<li><a href="https://github.com/scipy/scipy">SciPy</a> (60%)</li>
<li><a href="https://github.com/fortran-lang/stdlib">stdlib</a> (85%)</li>
<li><a href="https://github.com/lanl/SNAP">SNAP</a></li>
<li><a href="https://github.com/libprima/prima">PRIMA</a></li>
</ul>
<p><a href="https://github.com/lfortran/lfortran/issues/3806">Here</a> is our issue to track priorities to reach beta quality.</p>
<p>Our primary objective is to transition LFortran from alpha to beta, and we believe that successfully compiling 10 third-party codes is a key milestone in this journey. Our strategy prioritizes features based on their significance, ensuring that LFortran fully supports all language constructs used in these selected codes.</p>
<p>Progress toward beta will be measured by our ability to compile and execute these codes without modifications. Currently, another team is working on POT3D, which is nearly compiling but requires further refinement. We will continue announcing each successful compilation as LFortran achieves full compatibility.</p>
<p>Next, we plan to target <a href="https://github.com/fortran-lang/fpm">Fortran Package Manager (fpm)</a>, <a href="https://github.com/Reference-LAPACK/lapack">LAPACK</a>, other codes listed under <a href="https://github.com/lfortran/lfortran/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22Code%20to%20be%20Compiled%22">label:code-to-be-compiled</a>, and the remaining parts of Fortran stdlib and SciPy.</p>
<p>Once we reach our goal of compiling 10 third-party codes, we will collaborate with the community to determine additional steps needed for beta. In our definition, a beta-quality compiler is one that successfully executes user code without errors, though it may still contain some bugs.</p>
<h1 id="join-us">Join Us</h1>
<p>We welcome new contributors to join our journey. If you&rsquo;re interested, please reach out on <a href="https://lfortran.zulipchat.com/">Zulip</a>. Working on LFortran is both challenging and rewarding, offering ample opportunities for learning and growth.</p>
<h1 id="acknowledgements">Acknowledgements</h1>
<p>We want to thank:</p>
<ul>
<li><a href="https://sovereigntechfund.de/en/">Sovereign Tech Fund (STF)</a></li>
<li><a href="https://numfocus.org/">NumFOCUS</a></li>
<li><a href="https://quantstack.net/">QuantStack</a></li>
<li><a href="https://summerofcode.withgoogle.com/">Google Summer of Code</a></li>
<li><a href="https://www.johndcook.com/blog/expert-hipaa-deidentification/">John D. Cook</a></li>
<li><a href="https://lanl.gov/">LANL</a></li>
<li><a href="https://gsitechnology.com/">GSI Technology</a></li>
<li>Our GitHub, OpenCollective and NumFOCUS sponsors</li>
<li>All our contributors (104 so far!)</li>
</ul>
<h1 id="discussions">Discussions</h1>
<ul>
<li>Fortran Discourse:</li>
<li>Twitter/X:</li>
</ul>


        
          <div class="blog-tags">
            
              
              <a href="https://lfortran.org/tags/fortran/">Fortran</a>&nbsp;
            
              
              <a href="https://lfortran.org/tags/announcement/">Announcement</a>&nbsp;
            
              
              <a href="https://lfortran.org/tags/fortran-lang/">Fortran-lang</a>&nbsp;
            
              
              <a href="https://lfortran.org/tags/prima/">PRIMA</a>&nbsp;
            
          </div>
        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://lfortran.org/blog/2024/11/lfortran-supports-all-intrinsic-functions/" data-toggle="tooltip" data-placement="top" title="LFortran supports all intrinsic functions">&larr; Previous Post</a>
            </li>
          
          
        </ul>
      


      

    </div>
  </div>
</div>

      <footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2025
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://lfortran.org/">LFortran</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
           
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="https://lfortran.org/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://lfortran.org/js/load-photoswipe.js"></script>










  </body>
</html>

